spring:
  application:
    name: cash-desk-module-test

  jackson:
    serialization:
      write-dates-as-timestamps: false
      indent-output: true
    default-property-inclusion: non_null

server:
  port: 0  # Random port for tests
  error:
    include-message: always
    include-binding-errors: always
    include-stacktrace: never

cashdesk:
  security:
    # Production uses only the hash. For tests, we need the plain value to send in request headers.
    # The test plain value below hashes to the api-key-hash value.
    # In production, this plain value would be provided by clients and never stored in config.
    test-api-key: f9Uie8nNf112hx8s
    api-key-hash: fa82ed811150db64f564c4a0dcc69520d17178cf37703e161a3829018ff8d765
    header-name: FIB-X-AUTH

  storage:
    # TEST-SPECIFIC DATA DIRECTORY - completely separate from production
    # Uses temp directory that gets cleaned up automatically
    data-dir: ${java.io.tmpdir}/cashdesk-test-${random.uuid}
    transaction-file: ${cashdesk.storage.data-dir}/transactions.txt
    balance-file: ${cashdesk.storage.data-dir}/balances.txt

  backup:
    # Disable backups during tests
    enabled: false
    directory: ${java.io.tmpdir}/cashdesk-test-backups-${random.uuid}
    schedule: 0 0 2 * * *
    retention:
      max-backups: 30
      max-age-days: 90
    compression: true

  cashiers:
    initial-balances:
      bgn:
        amount: 1000.00
        denominations:
          10: 50
          50: 10
      eur:
        amount: 2000.00
        denominations:
          10: 100
          20: 0
          50: 20
    names: MARTINA,PETER,LINDA

logging:
  level:
    com.fibank.cashdesk: DEBUG
    org.springframework: WARN
    org.springframework.web: WARN
  pattern:
    console: '%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n'
